<!doctype html>

<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=1024" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <title>12,000 lines of RubyMotion</title>
    <meta name="description" content="impress.js is a presentation tool based on the power of CSS3 transforms and transitions in modern browsers and inspired by the idea behind prezi.com." />
    <meta name="author" content="Bartek Szopka" />
    <link href="http://fonts.googleapis.com/css?family=Open+Sans:regular,semibold,italic,italicsemibold|PT+Sans:400,700,400italic,700italic|PT+Serif:400,700,400italic,700italic" rel="stylesheet" />
    <link href="css/impress-demo.css" rel="stylesheet" />
    <link rel="shortcut icon" href="favicon.png" />
    <link rel="apple-touch-icon" href="apple-touch-icon.png" />
</head>

<body class="impress-not-supported">
<div id="impress">
  <div id="title" class="step" data-x="0" data-y="0" data-z="400" data-scale="2">
    <div style="text-align: center">
      <div>Hi, I'm Amir.</div>
      <img src="me.jpeg" id="logo" />
      <div>I ported</div>
      <img src="adarkroombanner.png" style="border: solid 1px silver; padding: 3px;" /><br />
      <div>to iOS.</div>
      <div style="font-weight: bold; font-size: 48px">It took 12,000 (awesome) Lines of</div>
      <img src="rubymotion.png" style="height: 200px;" /><br />
      <div style="font-size: 30px">A Dark Room ranks as one of the top 100 RPGs in the App Store!</div>
      <br/>
      <div style="font-size: 30px">And I have made <strike>millions</strike> <strike>thousands</strike> hundreds...</div>
      <br/>
    </div>
  </div>

  <div id="me" class="step" data-x="390" data-y="-675" data-z="0" data-rotate="-8" data-rotate-y="50">
    <div style="font-size: 40px">
      <b>Twitter:</b> @amirrajan<br/>
      <b>Web:</b> amirrajan.net<br/>
      <b>Source:</b> github.com/amirrajan/12k-lines-of-RM<br/>
    </div>
  </div>

  <div id="focus" class="step" data-x="0" data-y="-200" data-z="-650" data-scale="2">
  </div>

  <div id="adrstory0--" class="step" data-x="1000" data-y="-300" data-z="0" data-rotate="0" data-rotate-y="50">
    <span style="font-size: 48px; textalign: center">How'd the heck did I get here?</span>
    <img src="howdigethere.gif" style="width: 100%" /><br/>
    http://iwdrm.tumblr.com/
  </div>

  <div id="adrstory0" class="step" data-x="1500" data-y="-300" data-z="-300" data-rotate="0" data-rotate-y="90">
    <div style="font-size: 48px">Saw this...</div>
    <img src="adrtweet.png" />
  </div>

  <div id="adrstory3" class="step" data-x="1500" data-y="-300" data-z="-900" data-rotate="0" data-rotate-y="90">
    <div style="font-size: 45px">Got addicted and played for an hour ಠ_ಠ</div>
    <img src="adrscreenshot.png" />
  </div>

  <div id="adrstory4" class="step" data-x="1500" data-y="-300" data-z="-1800" data-rotate="0" data-rotate-y="90">
    <div style="font-size: 48px">Then saw this...</div>
    <img src="hackernews.png" style="width: 100%" />
  </div>

  <div id="adrstory5" class="step" data-x="1500" data-y="-300" data-z="-2800" data-rotate="0" data-rotate-y="90">
    <div style="font-size: 35px">
      So like any <strike>normal person</strike> curious developer I viewed source:
    </div>
    <pre style="font-size: 30px">
&lt;!--
A Dark Room (v1.2)
==================
A minimalist text adventure by Michael Townsend.
Inspired by Candy Box (http://candies.aniwey.net/)
Please don't steal me.
--&gt;
    </pre>
  </div>

  <div id="adrstory6" class="step" data-x="1500" data-y="-300" data-z="-3800" data-rotate="0" data-rotate-y="90">
    <div style="font-size: 35px; text-align: center">
        The game had an unexplainable charm to it... so I asked Michael if I could port it:  
    </div>
    <img src="emailthread.png" style="background-color: white; display: block; width: 100%" />
  </div>

  <div id="focus2" class="step" data-x="925" data-y="10" data-z="-3810" data-rotate="0" data-rotate-y="90" style="background-color: #F5F6F5; color: #656060; width: 1000px">
    <div style="font-family: arial; font-size: 35px; text-align: center">
      Yay!!! Wait...<br/>XCode and Cocoa go against the grain of everything I value in development workflows, and apis.<br/>Bulky, complex, unintuitive.
    </div>
  </div>

  <div id="focus3" class="step" data-x="-25" data-y="200" data-z="-850" data-scale="2" data-rotate-x="0">
  </div>

  <div id="readingobjc" class="step" data-x="2000" data-y="400" data-rotate-x="15">
    <div style="font-size: 40px; text-align: center">
      First I had to mentally map Objective C to Ruby...
    </div>
    <img src="objctorubystart.gif" style="width: 100%" /><br/>
    http://iwdrm.tumblr.com/
  </div>

  <div id="objctoruby1" class="step md-font" data-x="1500" data-y="900" data-rotate-x="15">
    Newing up a class, setting some properties, calling a method in Objective C:<br/><br />
    <pre>
Person *person = [[Person alloc] init];
person.firstName = @"Amir";
person.lastName = @"Rajan";
NSLog([person sayHello]);
    </pre>
  </div>

  <div id="objctoruby2" class="step md-font" data-x="2400" data-y="900" data-rotate-x="15">
    Newing up a class, setting some properties, calling a method in Ruby<br/><br/>
    <pre>
person = Person.alloc.init
person.firstName = "Amir"
person.lastName = "Rajan"
NSLog(person.sayHello)
    </pre>
  </div>

  <div id="objctoruby2-1" class="step md-font" data-x="1350" data-y="1500" data-rotate-x="15">
    Person class definition in Objective C:<br/><br/>
    <pre>
//Person.h
@interface Person : NSObject
@property NSString *firstName;
@property NSString *lastName;
- (NSString*)sayHello;
@end

//Person.m
#import "Person.h"
@implementation Person
- (NSString*)sayHello {
  return [NSString stringWithFormat:@"Hello, %@ %@.",
                                    _firstName,
                                    _lastName];
}
@end
    </pre>
  </div>

  <div id="objctoruby3" class="step md-font" data-x="2300" data-y="1350" data-rotate-x="15">
    Person class definition in Ruby:<br/><br/>
    <pre>
class Person
  attr_accessor :firstName, :lastName

  def sayHello
    "Hello, #{@firstName} #{@lastName}"
  end
end
    </pre>
  </div>

  <div id="objctoruby4" class="step md-font" data-x="1200" data-y="2100" data-rotate-x="15">
    Declaring and calling an Objective C method with 3 parameters:<br/><br/>
    <pre>
- (void)setDobWithMonth:(NSInteger)month
                withDay:(NSInteger)day
               withYear:(NSInteger)year {

}

[person setDobWithMonth:1 withDay:1 withYear:2013];
    </pre>
  </div>

  <div id="objctoruby5" class="step md-font" data-x="2150" data-y="2100" data-rotate-x="15">
    Declaring and calling a Ruby method with 3 parameters:<br/><br/>
    <pre>
def setDobWithMonth(month,
  withDay: day,
  withYear: year)

end

person.setDobWithMonth(1, withDay: 1, withYear: 2013)
    </pre>
  </div>

  <div id="objctoruby6" class="step md-font" data-x="1050" data-y="2700" data-rotate-x="15">
    Declaring and executing blocks in Objective C:<br/><br/>
    <pre style="font-size: 22px">
- (void)
   post:(NSDictionary *)objectToPost
  toUrl:(NSString *)toUrl
success:(void (^)(RKMappingResult *mappingResult))success { }

[client post: @{ @"firstName": @"Amir", @"lastName": @"Rajan" }
       toUrl: @"http://localhost/people"
     success:^(RKMappingResult *result) {
       //callback code here
     }];
    </pre>
  </div>

  <div id="objctoruby7" class="step md-font" data-x="2000" data-y="2700" data-rotate-x="15">
    Declaring and executing blocks in Ruby:<br/><br/>
    <pre>
def post(objectToPost, toUrl: toUrl, success: success)

end

client post({ firstName: "Amir", lastName: "Rajan" },
  toUrl: "http://localhost/people",
  success: lambda { |result|
    #callback code here
  })
    </pre>
  </div>

  <div id="objctoruby8" class="step md-font" data-x="900" data-y="3200" data-rotate-x="15">
    Finally, let's translate this code from a StackOverflow answer:<br/><br/>
    <pre style="font-size: 22px">
_label.layer.backgroundColor = [UIColor whiteColor].CGColor;

[UIView animateWithDuration:2.0 animations:^{
  _label.layer.backgroundColor = [UIColor greenColor].CGColor;
} completion:NULL];
    </pre>
  </div>

  <div id="objctoruby9" class="step md-font" data-x="2000" data-y="3200" data-rotate-x="15">
    Bam:<br/><br/>
    <pre>
@label.layer.backgroundColor = UIColor.whiteColor.CGColor

UIView.animateWithDuration(2.0, animations: lambda {
  @label.layer.backgroundColor = UIColor.greenColor.CGColor
}, completion: nil)
    </pre>
  </div>

  <div id="objctoruby10" style="text-align: center" class="step md-font" data-x="3900" data-y="1800" data-scale="3" data-rotate-x="15">
    Achievement Unlocked
    <img src="objctoruby.gif" style="width: 100%" /><br/>
    http://iwdrm.tumblr.com/
  </div>

  <div id="leverageruby" style="text-align: center" class="step md-font" data-x="-2500" data-y="-2000" data-rotate-x="15">
    <div style="textalign: center">With Objective C to Ruby mentally mapped.<br/>I started to take advantage of Ruby (and RubyMotion's dev workflow)...</div>
  </div>

  <div id="leverageruby1" class="step md-font" data-x="-2500" data-y="-1600" data-rotate-x="15">
    <div style="textalign: center">Opening an existing class:<br/><br/></div>
    <pre>
class UIView
  def animate duration = 0.5, &amp;block
    UIView.beginAnimations(nil, context:nil)
    UIView.setAnimationDuration(duration)
    instance_eval &amp;block
    UIView.commitAnimations
  end
end

label.setAlpha 0
label.animate 1 { label.setAlpha 1 }
    </pre>
  </div>

  <div id="leverageruby2" class="step" data-x="-1700" data-y="-1500" data-rotate-x="15">
    <div style="textalign: center">Using Objective C Categories:<br/><br/></div>
    <pre style="font-size: 20px">
@interface UIView (UIViewExtensions)
- (void)animate:(double)duration block:(void (^)(void))block;
- (void)animate:(void (^)(void))block;
@end

@implementation UIView (UIViewExtensions)
- (void)animate:(void (^)(void))block {
  [self animate:0.5 block:block];
}

- (void)animate:(double)duration block:(void (^)(void))block {
  [UIView beginAnimations:nil context:nil];
  [UIView setAnimationDuration:duration];
  block();
  [UIView commitAnimations];
}
@end

[label setAlpha:0];
[label animate:1 block:^{ [label setAlpha:1]; }];
    </pre>
  </div>

  <div id="leverageruby3" class="step md-font" data-x="-2500" data-y="-700" data-rotate-x="15">
    <div style="textalign: center">Class macros:<br/><br/></div>
      <pre>
class SnarlingBeastEvent &lt; EncounterEvent
  title "a snarling beast"
  text "a snarling beast leaps out of the underbrush." 
  damage 1

  def loot
    { 
      fur: { min: 3, max: 7, chance: 1.0 }
    }
  end
end
    </pre>
  </div>

  <div id="leverageruby4" class="step md-font" data-x="-2500" data-y="-100" data-rotate-x="15">
    <div style="textalign: center">Class macros:<br/><br/></div>
    <pre>
class EncounterEvent
  def self.title title
    define_method("title") { title }
  end

  def self.text text
    define_method("text") { text }
  end

  def self.health health
    define_method("health") { health }
  end
end
    </pre>
  </div>

  <div id="leverageruby5" class="step" data-x="-1500" data-y="-700" data-rotate-x="15">
    <div style="textalign: center">Class methods:<br/><br/></div>
      <pre style="font-size: 20px">@interface SnarlingBeastEvent : EncounterEvent
+ (id)initNew;
- (NSDictionary *)loot;
@end

@implementation SnarlingBeastEvent
+ (id)initNew {
  return [super initWithAttributes: @{
    @"health": [[NSNumber alloc]initWithInt: 1],
    @"title": @"a snarling beast",
    @"text": @"a snarling beast leaps out of the underbrush."
  }];
}
  
- (NSDictionary *)loot {
  return @{
    @"fur": @{
      @"min": [[NSNumber alloc]initWithDouble:3.0],
      @"max": [[NSNumber alloc]initWithDouble:7.0],
      @"chance": [[NSNumber alloc]initWithDouble:1.7]
    }
  };
}
@end</pre>
    </div>
  
  <div id="leverageruby6" class="step md-font" data-x="-1500" data-y="100" data-rotate-x="15">
    <div style="textalign: center">Class methods:<br/><br/></div>
      <pre>
@interface EncounterEvent : NSObject
@property NSString *title;
@property NSString *text;
@property NSInteger health;
+ (id)initWithAttributes:(NSDictionary *)attributes;
@end

@implementation EncounterEvent
+ (id)initWithAttributes:(NSDictionary *)attributes {
  EncounterEvent *e = [[EncounterEvent alloc] init];
  e.title = [attributes valueForKey:@"title"];
  e.text = [attributes valueForKey:@"text"];
  NSNumber *num = [attributes valueForKey:@"health"];
  e.health = [num integerValue];
  return e;
}
@end
      </pre>
  </div>

  <div id="leverageruby7" class="step md-font" data-x="-2500" data-y="800" data-rotate-x="15">
    <div style="textalign: center">Testing with MacBacon:<br/><br/></div>
    <pre>
describe "population" do
  before do
  end

  it "kills population (except for one dude)" do
  end
end
      </pre>
  </div>
  
  <div id="leverageruby8" class="step md-font" data-x="-1500" data-y="800" data-rotate-x="15">
    <div style="textalign: center">Testing with Cedar:<br/><br/></div>
      <pre>
SPEC_BEGIN(PopulationSpec)
describe(@"population", ^{
  before(^{
  });

  it(@"kills population (except for one dude)", ^{
  });
}
SPEC_END
      </pre>
  </div>

  <div id="leverageruby9image" class="step" data-x="-3000" data-y="1400" data-rotate-x="15">
    <div style="font-size: 50px;">Build this</div>
    <img src="simpleview.png" style="height: 600px" />
    <div style="font-size: 50px">with ...</div>
  </div>

  <div id="leverageruby9" class="step" data-x="-2500" data-y="1400" data-rotate-x="15">
    <div style="textalign: center">Views using Cocoa Apis:<br/><br/></div>
    <pre style="font-size: 16px">class AppDelegate
  def application(application, didFinishLaunchingWithOptions:launchOptions)
    @window = UIWindow.alloc.initWithFrame(UIScreen.mainScreen.bounds)
    @window.makeKeyAndVisible
    room_controller = RoomViewController.alloc.init
    navigation_controller =
      UINavigationController.alloc.initWithRootViewController(room_controller)
    @window.rootViewController = navigation_controller
    true
  end
end

class RoomViewController &lt; UIViewController
  def viewDidLoad
    setTitle "a dark room"
    view.backgroundColor = UIColor.whiteColor
    @button = UIButton.buttonWithType(UIButtonTypeRoundedRect)
    @button.setTitle "light fire", forState: UIControlStateNormal 
    @button.frame = CGRectMake(0, 100, 320, 40)
    @button.addTarget(self, action: :button_clicked,
      forControlEvents: UIControlEventTouchUpInside)
    view.addSubview @button
  end

  def button_clicked
  end
end
    </pre>
  </div>

  <div id="leverageruby10" class="step" data-x="-1500" data-y="1400" data-rotate-x="15">
    <div style="textalign: center">Views using <a href="https://github.com/clearsightstudio/ProMotion" target="_blank">ProMotion</a> and <a href="https://github.com/clearsightstudio/bubblewrap" target="_blank">BubbleWrap</a> :<br/><br/></div>
    <pre style="font-size: 20px">
class AppDelegate &lt; PM::Delegate
  def on_load(app, options)
    open RoomScreen.new(nav_bar: true)
  end
end

class RoomScreen &lt; PM::Screen
  title "a dark room"

  def on_load
    @button = UIButton.buttonWithType(UIButtonTypeRoundedRect)
    view.backgroundColor = UIColor.whiteColor
    @button.setTitle "light fire", forState: UIControlStateNormal 
    @button.frame = CGRectMake(0, 100, 320, 40)
    add @button
    @button.when(UIControlEventTouchUpInside) {  }
  end
end
    </pre>
  </div>

  <div id="leverageruby11" class="step md-font" data-x="-2500" data-y="2000" data-rotate-x="15">
    Other nice things:<br/><br/>
    <ul>
      <li>Out of the box rake tasks for build, test, and packaging.</li>
      <li>Bundler integration.</li>
      <li>Use Objective C libraries via CocoaPods.</li>
      <li>Good OSS ecosystem: <a href="http://rubymotion-wrappers.com" target="_blank">rubymotion-wrappers.com</a></li>
    </ul>
    <br/>
    <div>
      For what it's worth. With enough time and effort. You can get XCode, Objective C, and Cocoa to work as nice as Ruby and RubyMotion...
    </div>
  </div>

  <div id="leverageruby12" class="step md-font" data-x="-1500" data-y="2000" data-rotate-x="15">
    But you might feel like this afterwards:<br/><br/>
    <img src="notfun.gif" style="width: 100%" /><br/>
    http://iwdrm.tumblr.com/
  </div>

  <div id="leverageruby13" class="step md-font" data-x="-500" data-y="2000" data-rotate-x="15">
    I'd rather leverage RM's ecosystem, get my app done, and go get a shawarma:<br/><br/>
    <img src="gtd.gif" style="width: 100%" /><br/>
    http://technoir.nl/
  </div>

  <div id="focusappstore" class="step" data-x="0" data-y="1100" data-rotate-x="15" data-scale="2" data-z="150">
  </div>

  <div id="graphoverview" class="step" data-x="0" data-y="1150" data-z="300">
  </div>

  <div id="downloads" class="step" data-x="0" data-y="800">
    Downloads:<br/>
    <div class="data-point" style="left: 70px; top: 90px;">Initial Release: Nov. 27th to Dec. 7th</div>
    <div class="data-point" style="left: 220px; top: 100px;">GOTY 2013 Lists - Giant Bomb, Paste Magazine:<br/>Dec. 27th</div>
    <div class="data-point" style="left: 360px; top: 80px;">VoiceOver updates for the blind:<br/>Jan. 4th</div>
    <div class="data-point" style="left: 475px; top: 55px;">Tweet about ADR by users with 6k, 12k followers<br/>Jan. 10th, 16th</div>
    <div class="data-point" style="left: 590px; top: 55px;">Promocode give-aways<br/>Jan. 19th, 26th, 30th</div>
    <div class="data-point" style="left: 895px; top: 35px; width: 150px;">
      Price Drop to $0.99, leads to 600 downloads:<br/>Feb 12th - 14th
    </div>
    <div class="data-point" style="left: 895px; top: 138px; width: 150px;">
      Price Drop to free, leads to another <b>8,993</b> downloads:<br/>Feb 15th
    </div>
    <div class="data-point" style="left: 895px; top: 240px; width: 150px;">
      Price goes back to $0.99, downloads fall back to norms:<br/>Feb 16th
    </div>
    <img src="downloads.png" />
  </div>

  <div id="downloads1" class="step" data-x="-450" data-y="800" data-z="-600">
  </div>

  <div id="downloads2" class="step" data-x="-275" data-y="800" data-z="-600">
  </div>

  <div id="downloads3" class="step" data-x="-185" data-y="800" data-z="-600">
  </div>

  <div id="downloads4" class="step" data-x="-70" data-y="800" data-z="-600">
  </div>

  <div id="downloads5" class="step" data-x="50" data-y="800" data-z="-600">
  </div>

  <div id="downloads6" class="step" data-x="400" data-y="800" data-z="-600">
  </div>

  <div id="revenue" class="step" data-x="0" data-y="1100">
    Revenue:<br/>
    <img src="revenue.png" />
  </div>

  <div id="rankings" class="step" data-x="0" data-y="1450">
    Top Charts rank under the Games, Role Playing Category:<br/>
    <img src="rankings.png" />
  </div>

  <div id="graphoverview2" class="step" data-x="0" data-y="1150" data-z="350">
  </div>

  <div id="graphoverview3" class="step md-font" style="width: 1000px;" data-x="1900" data-z="2500" data-y="3500" data-scale="9">
    No happy ending.<br/>
    No overnight millionaires.<br/>
    Just steady improvements month over month.<br/>
    Because of an unrelenting persistence to share this story.<br/>
    The one that happens <a href="https://itunes.apple.com/us/app/a-dark-room/id736683061?mt=8" target="_blank">in the game</a> and the one that <a href="http://amirrajan.net/a-dark-room/#adarkroomstory">exists outside</a>.
  </div>

  <div class="hint">
      <p>Use a spacebar or arrow keys to navigate</p>
  </div>
<script>
if ("ontouchstart" in document.documentElement) { 
    document.querySelector(".hint").innerHTML = "<p>Tap on the left or right to navigate</p>";
}
</script>
<script src="js/impress.js"></script>
<script>impress().init();</script>
</body>
</html>
